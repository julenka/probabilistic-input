<!-- Created on 5/26/2014 -->
<!DOCTYPE html>
<html>
<head>
    <title>Name Your Demo Here</title>

    <!-- JQuery -->
    <script type="text/javascript" src="../lib/jquery.js"></script>

    <!-- Snap SVG library -->
    <script type="text/javascript" src="../lib/snap.svg.js"></script>

    <!-- Julia library -->
    <script type="text/javascript" src="../julia.js"></script>

    <!-- Julia CSS -->
    <link type="text/css" rel="stylesheet" href="../julia.css"/>

    <!-- Included Views-->

</head>
<body>
<h3>Your Demo Title Here</h3>
<div id="top_bar"></div>

<div id="demo_description">Describe your demo here</div>
<table>
    <tr>
        <td><svg id="demo_interface" width="640" height="480"></svg></td>
        <td><div id="demo_alternatives"></div></td>
    </tr>
</table>

<div id="demo_settings">Demo Settings go here</div>

<script>
    // Your custom views here
</script>
<script>

    /**
     * Set up the interface here
     * @param rootView
     */
    function setup(rootView) {

    }

    /**
     *
     * attributes: name, id, checked
     * description: description of the option (user sees this)
     * onClick: execute when clicked
     */
    function addOption(attributes, description, onClick) {
        var option = $("<input/>")
                .attr("type", "radio")
                .attr(attributes)
                .click(onClick);
        var label = $("<label/>")
                .attr("for", attributes.id)
                .html(description);
        $("#demo_settings").append(option, label);
    }

    /**
     * Executed when the document loads. Intended to be boilerplate, shouldn't have to replace much here (for now).
     */
    $(document).ready(function(){
        var mouse_variance = 10;
        var julia = new Julia();
        var rootView = new ContainerView(julia);
        julia.setRootView(rootView);

        setup(rootView);

        var $alternatives = $("#demo_alternatives");
        var $mainInterface = $("#demo_interface");
        // Add an event source
        var mouseHook = new PMouseEventHook($mainInterface[0], mouse_variance, mouse_variance);
        var touchHook = new PTouchEventHook($mainInterface[0], 0, 0);
        julia.addEventSource(mouseHook);
        julia.addEventSource(touchHook);

        // Initialize feedback
        julia.feedback = new OverlayFeedback(julia,
                {feedbackType:  OverlayOpacity,
                    renderThreshold: 0.01});

        julia.drawFeedback($mainInterface, julia.feedback);

        julia.dispatchCompleted = function(new_alternatives, uiUpdated) {
            if(!uiUpdated) {
                return;
            }
            $mainInterface.empty();
            julia.drawFeedback($mainInterface, julia.feedback);
            julia.dumpAlternativesAsSnap($alternatives, $mainInterface.width(), $mainInterface.height(), 0.25,
                    function() {
                        $mainInterface.empty();
                        julia.rootView.draw($mainInterface);
                        julia.dumpAlternativesAsSnap($alternatives, $mainInterface.width(), $mainInterface.height(), 0.25);
                    }
            );
        };

//        var onOptionClicked = function(feedbackFn) {
//            return function(e) {
//                var $this = $(this);
//                julia.feedback = feedbackFn();
//            }
//        };
//        addOption({name: "feedback_options", id:"n_best_1", checked: true},
//                "n best feedback, max 4",
//                onOptionClicked(function() { return new NBestFeedback(julia, {n: 4})}) );
    });
</script>
</body>
</html>