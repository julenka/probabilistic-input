<!DOCTYPE html>
<html>
<head>
    <title>Event Hook Test</title>
    <script type="text/javascript" src="../lib/jquery.js"></script>
    <script type="text/javascript" src="../julia.js"></script>
    <!-- Julia CSS -->
    <link type="text/css" rel="stylesheet" href="../julia.css"/>
</head>
<body>
<div id="mouse" style="background-color: gray; width: 300px; height: 300px">
    Mouse region
</div>

<h2>Instructions</h2>
<ul>
    <li>Mouse down, move, up in mouse region should be captured and displayed in console as Events</li>
    <li>key down, up should be captured and displayed in console as Events</li>
    <li>unchecking 'listeners on?' removes event listeners, checking adds them back again.</li>
</ul>
<div>
    <input type="checkbox" id="chk1" checked="True"/>
    <label for="chk1">listeners on?</label>
</div>
<div>Console:</div>
<div id="console"></div>
<script type="text/javascript">
    var mouseHook = new PMouseEventHook(document.getElementById("mouse"));
    var keyHook = new PKeyEventHook();
    var touchHook = new PTouchEventHook(document.getElementById("mouse"));

    var console_div = $("#console");
    var event_history_size = 10;
    var logEvent = function(e) {
        var ea = [];
        for(var p in e) {
            if(typeof e[p] === "function") {
                continue;
            }
            ea.push(p + ":" + e[p]);
        }

        while(console_div.children().length > event_history_size) {
            console_div.children().last().remove();
        }
        console_div.prepend($("<div class='border1px'>captured " + e.type + " : " + ea.join("<br/>") + "</div>"));
    };

    mouseHook.addListener(logEvent);
    keyHook.addListener(logEvent);

    $("#chk1").click(function(){
        console.log("clicked");
        if(this.checked) {
            mouseHook.addListener(logEvent);
            keyHook.addListener(logEvent);

        } else {
            mouseHook.removeEventListeners();
            keyHook.removeEventListeners();
        }
    })
</script>

</body>
</html>