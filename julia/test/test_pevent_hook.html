<!DOCTYPE html>
<html>
<head>
    <title>Event Hook Test</title>
    <script type="text/javascript" src="../lib/jquery.js"></script>
    <script type="text/javascript" src="../julia.js"></script>
</head>
<body>
<div id="mouse" style="background-color: gray; width: 300px; height: 300px">
    Mouse region
</div>

<h2>Instructions</h2>
<ul>
    <li>Mouse down, move, up in mouse region should be captured and displayed in console as Events</li>
    <li>key down, up should be captured and displayed in console as Events</li>
    <li>unchecking 'listeners on?' removes event listeners, checking adds them back again.</li>
</ul>
<div>
    <input type="checkbox" id="chk1" checked="True"/>
    <label for="chk1">listeners on?</label>
</div>
<script type="text/javascript">
    var mouseHook = new PMouseEventHook(document.getElementById("mouse"));
    var keyHook = new PKeyEventHook();

    var logEvent = function(e) {
        var ea = [];
        for(var p in e) {
            if(typeof e[p] === "function") {
                continue;
            }
            ea.push(p + ":" + e[p]);
        }
        console.log("captured " + e.type + " : " + ea.join("\n"));
    };

    mouseHook.addListener(logEvent);
    keyHook.addListener(logEvent);

    $("#chk1").click(function(){
        console.log("clicked");
        if(this.checked) {
            mouseHook.addListener(logEvent);
            keyHook.addListener(logEvent);

        } else {
            mouseHook.removeEventListeners();
            keyHook.removeEventListeners();
        }
    })
</script>
</body>
</html>